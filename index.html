<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ministry OS | Mission Control</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/react@16.14.0/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16.14.0/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

    <!-- React Beautiful DnD -->
    <script src="https://unpkg.com/react-beautiful-dnd@13/umd/react-beautiful-dnd.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#050505', 
                        'bg-panel': '#0A0A0A',
                        'bg-card': '#111111',
                        'border-dim': '#222222',
                        'border-light': '#333333',
                        'accent': '#CCFF00', 
@@ -51,51 +51,61 @@
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body { background-color: #050505; color: #EDEDED; font-family: 'Inter', sans-serif; overflow: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #222; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #444; }
        
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
        .cmd-enter { animation: slideDown 0.15s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { DragDropContext, Droppable, Draggable } = window.ReactBeautifulDnD;
        const ReactBeautifulDndGlobal = window.ReactBeautifulDnd || window.ReactBeautifulDnD;
        const DragDropFallback = ({ children }) => children;
        const DroppableFallback = ({ children }) =>
            children({ innerRef: () => {}, droppableProps: {}, placeholder: null });
        const DraggableFallback = ({ children }) =>
            children({ innerRef: () => {}, draggableProps: {}, dragHandleProps: {} });
        const { DragDropContext, Droppable, Draggable } = ReactBeautifulDndGlobal || {
            DragDropContext: DragDropFallback,
            Droppable: DroppableFallback,
            Draggable: DraggableFallback,
        };

        // --- ICONS ---
        const Icon = ({ path, size = 16, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path}</svg>
        );

        const Icons = {
            Board: <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />,
            List: <g><line x1="8" y1="6" x2="21" y2="6" /><line x1="8" y1="12" x2="21" y2="12" /><line x1="8" y1="18" x2="21" y2="18" /><line x1="3" y1="6" x2="3.01" y2="6" /><line x1="3" y1="12" x2="3.01" y2="12" /><line x1="3" y1="18" x2="3.01" y2="18" /></g>,
            Calendar: <g><rect x="3" y="4" width="18" height="18" rx="2" ry="2" /><line x1="16" y1="2" x2="16" y2="6" /><line x1="8" y1="2" x2="8" y2="6" /><line x1="3" y1="10" x2="21" y2="10" /></g>,
            Timeline: <g><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /><line x1="8" y1="3" x2="8" y2="21" /><line x1="12" y1="8" x2="16" y2="8" /><line x1="12" y1="16" x2="20" y2="16" /></g>,
            Search: <g><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></g>,
            Plus: <g><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></g>,
            Filter: <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />,
            More: <g><circle cx="12" cy="12" r="1" /><circle cx="12" cy="5" r="1" /><circle cx="12" cy="19" r="1" /></g>,
            Check: <polyline points="20 6 9 17 4 12" />,
            Clock: <g><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></g>,
            User: <g><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" /><circle cx="12" cy="7" r="4" /></g>,
            ChevronDown: <polyline points="6 9 12 15 18 9" />,
            X: <g><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></g>,
            Play: <polygon points="5 3 19 12 5 21 5 3" />,
            Pause: <g><rect x="6" y="4" width="4" height="16" /><rect x="14" y="4" width="4" height="16" /></g>,
            Focus: <circle cx="12" cy="12" r="10" />,
            Shield: <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />,
            FileText: <g><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /><polyline points="10 9 9 9 8 9" /></g>,
@@ -868,30 +878,29 @@
                            <div className="flex items-center gap-4 text-xs text-zinc-400">
                                <span>Open: {stats.open}</span>
                                <span className={stats.overdue > 0 ? 'text-danger' : ''}>Overdue: {stats.overdue}</span>
                                <span>This Week: {stats.thisWeek}</span>
                                <button onClick={exportData} className="text-accent hover:underline">Export</button>
                                <label className="text-accent hover:underline cursor-pointer">
                                    Import <input type="file" accept=".json" onChange={importData} className="hidden" />
                                </label>
                            </div>
                        </div>

                        <div className="flex-1 overflow-hidden relative bg-bg-main">
                            {view === ViewType.PROJECT_LIST && <ProjectListView projects={projects} onViewDetail={openProject} onAddProject={addProject} onArchiveProject={archiveProject} onUnarchiveProject={unarchiveProject} />}
                            {view === ViewType.PROJECT_DETAIL && activeProject && <ProjectDetailView projectId={activeProject} tasks={filteredTasks} projects={projects} onEdit={setEditingTask} setView={setView} onGenerateEvent={generateEvent} updateStatus={updateStatus} />}
                            {view === ViewType.BOARD && <BoardView tasks={filteredTasks} projects={projects} onEdit={setEditingTask} updateStatus={updateStatus} />}
                            {view === ViewType.GOALS && <GoalsView tasks={filteredTasks} projects={projects} onEdit={setEditingTask} updateStatus={updateStatus} />}
                            {view === ViewType.MEETING && <MeetingView tasks={filteredTasks} />}
                            {view === ViewType.FOCUS && <FocusView tasks={filteredTasks} onEdit={setEditingTask} updateStatus={updateStatus} />}
                        </div>
                    </main>
                    <Modal isOpen={!!editingTask} onClose={() => setEditingTask(null)} task={editingTask} onSave={handleSave} projects={projects} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
